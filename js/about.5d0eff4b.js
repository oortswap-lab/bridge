"use strict";(self["webpackChunkOORTSwap"]=self["webpackChunkOORTSwap"]||[]).push([[443],{8529:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var n=t(3396),o=t(7139),s=t.p+"img/arrow-down-grey.0bc64643.svg";const i=e=>((0,n.dD)("data-v-665cb040"),e=e(),(0,n.Cn)(),e),r={class:"bridge_box"},l={class:"exchange_box"},c=i((()=>(0,n._)("div",{class:"exchange_top"},[(0,n._)("p",null,"Bridge")],-1))),d={class:"exchange_bottom"},m={class:"exchange_item_box"},w={class:"exchange_item_top flex_row_space_between"},u={style:{color:"rgb(0, 88, 255)"}},f={class:"flex_row",style:{cursor:"pointer"}},g=["src"],h=i((()=>(0,n._)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",class:"sc-dyGzUR fjZPDO"},[(0,n._)("path",{d:"M0.97168 1L6.20532 6L11.439 1",stroke:"#000000"})],-1))),p={class:"flex_row"},_=["src"],b={style:{"font-size":"14px",color:"rgb(0, 0, 0)","padding-left":"5px"}},k=i((()=>(0,n._)("img",{style:{},src:s,alt:""},null,-1))),T={class:"exchange_item_box"},C={class:"exchange_item_top flex_row_space_between"},y={style:{color:"rgb(0, 88, 255)"}},v={class:"flex_row",style:{cursor:"pointer"}},x=["src"],Z=i((()=>(0,n._)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",class:"sc-dyGzUR fjZPDO"},[(0,n._)("path",{d:"M0.97168 1L6.20532 6L11.439 1",stroke:"#000000"})],-1))),B={class:"flex_row"},U=["src"],I={style:{"font-size":"14px",color:"rgb(0, 0, 0)","padding-left":"5px"}},D={class:"exchange_item_box"},N=i((()=>(0,n._)("div",{class:"exchange_item_top flex_row_space_between"},[(0,n._)("h5",null,[(0,n._)("span",null,"Receive")])],-1)));function W(e,a,t,s,i,W){const A=(0,n.up)("a-button"),S=(0,n.up)("a-menu-item"),O=(0,n.up)("a-menu"),M=(0,n.up)("a-dropdown"),z=(0,n.up)("a-input"),V=(0,n.up)("a-col"),L=(0,n.up)("a-row");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",l,[c,(0,n._)("div",d,[(0,n.Wm)(L,{align:"middle",justify:"center",gutter:[0,12]},{default:(0,n.w5)((()=>[(0,n.Wm)(V,{span:24,order:e.fromAndTo?3:1},{default:(0,n.w5)((()=>[(0,n._)("div",m,[(0,n._)("div",w,[(0,n._)("h5",null,[(0,n.Uk)("From "),(0,n._)("span",u,(0,o.zw)(e.fromToken.chainName),1)]),(0,n._)("p",null,[(0,n.Uk)((0,o.zw)(""+e.fromToken.balance)+" ",1),(0,n.Wm)(A,{type:"text",style:{color:"rgb(0, 88, 255)",padding:"0"},onClick:e.onFromMax},{default:(0,n.w5)((()=>[(0,n.Uk)("Max")])),_:1},8,["onClick"])])]),(0,n.Wm)(z,{class:"exchange_item_input",size:"large",value:e.fromValue,"onUpdate:value":a[0]||(a[0]=a=>e.fromValue=a),placeholder:"0.0",bordered:!1,"max-length":50,onkeyup:e.fromValue=e.fromValue.match(/\d+(\.\d{0,8})?/)?e.fromValue.match(/\d+(\.\d{0,8})?/)[0]:"",onChange:e.onChange},{suffix:(0,n.w5)((()=>[(0,n.Wm)(M,{trigger:["click"]},{overlay:(0,n.w5)((()=>[(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.fromData,(a=>((0,n.wg)(),(0,n.j4)(S,{onClick:t=>e.onFromCheck(a)},{default:(0,n.w5)((()=>[(0,n._)("div",p,[(0,n._)("img",{style:{width:"20px",height:"20px","border-radius":"50%"},src:a.icon,alt:""},null,8,_),(0,n._)("h4",b,(0,o.zw)(a.name)+" ("+(0,o.zw)(a.chainName)+")",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n._)("img",{src:e.fromToken.icon,alt:""},null,8,g),(0,n._)("h4",null,(0,o.zw)(e.fromToken.name),1),h])])),_:1})])),_:1},8,["value","onkeyup","onChange"])])])),_:1},8,["order"]),(0,n.Wm)(V,{span:24,order:2,class:"flex_column"},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{type:"text",shape:"circle",onClick:e.onSwitch},{default:(0,n.w5)((()=>[k])),_:1},8,["onClick"])])),_:1}),(0,n.Wm)(V,{span:24,order:e.fromAndTo?1:3},{default:(0,n.w5)((()=>[(0,n._)("div",T,[(0,n._)("div",C,[(0,n._)("h5",null,[(0,n.Uk)("To "),(0,n._)("span",y,(0,o.zw)(e.toToken.chainName),1)]),(0,n._)("p",null,(0,o.zw)(""+e.toToken.balance),1)]),(0,n.Wm)(z,{class:"exchange_item_input",size:"large",value:e.toValue,"onUpdate:value":a[1]||(a[1]=a=>e.toValue=a),placeholder:"0.0",bordered:!1,disabled:""},{suffix:(0,n.w5)((()=>[(0,n.Wm)(M,{trigger:["click"]},{overlay:(0,n.w5)((()=>[(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.toData,(a=>((0,n.wg)(),(0,n.j4)(S,{onClick:t=>e.onToCheck(a)},{default:(0,n.w5)((()=>[(0,n._)("div",B,[(0,n._)("img",{style:{width:"20px",height:"20px","border-radius":"50%"},src:a.icon,alt:""},null,8,U),(0,n._)("h4",I,(0,o.zw)(a.name)+"("+(0,o.zw)(a.chainName)+")",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("div",v,[(0,n._)("img",{src:e.toToken.icon,alt:""},null,8,x),(0,n._)("h4",null,(0,o.zw)(e.toToken.name),1),Z])])),_:1})])),_:1},8,["value"])])])),_:1},8,["order"]),(0,n.Wm)(V,{span:24,order:e.fromAndTo?1:3},{default:(0,n.w5)((()=>[(0,n._)("div",D,[N,(0,n.Wm)(z,{class:"exchange_item_input",size:"large",value:e.toAddress,"onUpdate:value":a[2]||(a[2]=a=>e.toAddress=a),placeholder:"0x",bordered:!1,disabled:e.toAddressDisable,style:{"font-size":"14px !important"}},null,8,["value","disabled"])])])),_:1},8,["order"])])),_:1}),e.address&&e.address.length>0?((0,n.wg)(),(0,n.j4)(A,{key:0,block:"",class:"exchange_btn",onClick:e.onSwap,loading:e.swapLoad,disabled:""==e.fromValue||""==e.toValue,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(""!=e.fromValue&&""!=e.toValue?e.btnTitle:"Enter an amount"),1)])),_:1},8,["onClick","loading","disabled"])):((0,n.wg)(),(0,n.j4)(A,{key:1,block:"",class:"exchange_btn",onClick:e.login,type:"default"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)("Connect Wallet"))])),_:1},8,["onClick"]))])])])}t(560);var A=t(2693),S=t(4870),O=t(65),M=t(2201),z=(0,n.aZ)({name:"Bridge",setup(){const e=(0,O.oR)(),a=(0,S.qj)({address:(0,n.Fl)((()=>e.state.wallet_address)),swapLoad:!1,fromValue:"",toValue:"",btnTitle:"Swap",toAddress:"",toAddressDisable:!0,fromToken:{icon:t(782),name:"USDT",chainId:"56",chainName:"BNBChain",balance:"~"},toToken:{icon:t(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"},fromData:[{icon:t(782),name:"USDT",chainId:"56",chainName:"BNBChain",balance:"~"},{icon:t(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"},{icon:t(8240),name:"CCN",chainId:"970",chainName:"OORT",balance:"~"},{icon:t(2868),name:"CCN",chainId:"828",chainName:"Huygens",balance:"~"}],toData:[{icon:t(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"}]});(0,n.YP)((()=>[e.state.wallet_address]),(()=>{a.toAddress=e.state.wallet_address,o.refresh()})),(0,n.bv)((()=>{o.refresh()}));const o={sleep(e){return new Promise((a=>setTimeout(a,e)))},async refreshFromBalance(){if(a.fromToken&&e.state.wallet_address){const t=a.fromToken.chainId,n=a.fromToken.name;if("USDT"==n){const n=M.Z.getUsdtContract(t);let o=await n.methods.balanceOf(e.state.wallet_address).call();a.fromToken.balance=M.Z.getUsdtBalance(t,o)}else if("CCN"==n)if("970"==t){const n=M.Z.getCCNContract(t);let o=await n.methods.balanceOf(e.state.wallet_address).call();a.fromToken.balance=M.Z.getUsdtBalance(t,o)}else{const n=await M.Z.getWeb(t).eth.getBalance(e.state.wallet_address);a.fromToken.balance=M.Z.getUsdtBalance(t,n)}}},async refreshToBalance(){if(a.toToken&&e.state.wallet_address){const t=a.toToken.chainId,n=a.toToken.name;if("USDT"==n){const n=M.Z.getUsdtContract(a.toToken.chainId);let o=await n.methods.balanceOf(e.state.wallet_address).call();a.toToken.balance=M.Z.getUsdtBalance(t,o)}else if("970"==t){const n=M.Z.getCCNContract(t);let o=await n.methods.balanceOf(e.state.wallet_address).call();a.toToken.balance=M.Z.getUsdtBalance(t,o)}else{const n=await M.Z.getWeb(t).eth.getBalance(e.state.wallet_address);a.toToken.balance=M.Z.getUsdtBalance(t,n)}}},async refresh(){e.state.wallet_address&&(o.refreshFromBalance(),o.refreshToBalance())},async onFromMax(){"828"==a.fromToken.chainId?a.fromValue=A.Z.minus(a.fromToken.balance,.1):a.fromValue=a.fromToken.balance,o.onChange()},async onFromCheck(n){a.fromToken=n,e.dispatch("switchChainid",a.fromToken.chainId);const s=Array();"56"==a.fromToken.chainId&&"USDT"==a.fromToken.name?(s.push({icon:t(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"}),a.toData=s):"970"==a.fromToken.chainId&&"USDT"==a.fromToken.name?(s.push({icon:t(782),name:"USDT",chainId:"56",chainName:"BNBChain",balance:"~"}),a.toData=s):"970"==a.fromToken.chainId&&"CCN"==a.fromToken.name?(s.push({icon:t(2868),name:"CCN",chainId:"828",chainName:"Huygens",balance:"~"}),a.toData=s):"828"==a.fromToken.chainId&&"CCN"==a.fromToken.name&&(s.push({icon:t(8240),name:"CCN",chainId:"970",chainName:"OORT",balance:"~"}),a.toData=s),a.toToken=a.toData[0],"828"==a.fromToken.chainId?a.toAddressDisable=!0:(a.toAddressDisable=!0,a.toAddress=e.state.wallet_address),o.refreshFromBalance(),o.refreshToBalance(),e.state.chainId==a.fromToken.chainId||e.dispatch("showWalletModal",!0)},async onToCheck(e){a.toToken=e,o.refreshToBalance()},async login(){e.dispatch("showWalletModal",!0)},async onChange(){"USDT"==a.fromToken.name?a.toValue=A.Z.times(a.fromValue,"0.99",4):a.toValue=A.Z.times(a.fromValue,"0.985",4)},async onSwap(){try{if(e.state.chainId!=a.fromToken.chainId)return void e.dispatch("showWalletModal",!0);const n=a.fromToken.chainId;if("MetaMask"!=e.state.wallet_type){var t=n+""=="828"?"3":n;if(window.aleereum.networkId!=t&&0==await window.aleereum.switchNetwork(t))throw"Please switch to "+(n+""=="828"?"Huygens":"Mainnet");window.aleereum.isConnected&&!window.aleereum.islocked||await window.aleereum.connect()}a.swapLoad=!0;const s=a.fromToken.name,i=A.Z.timesPow(a.fromValue,18,0),r=e.state.wallet_address,l=M.Z.getGass(n);if("USDT"==s){const t=M.Z.getBridgeContractAddress(n),s=M.Z.getUsdtContract(n),c=await s.methods.balanceOf(r).call(),d=await M.Z.getBridgeContractW(n).methods.minAmount().call();if(!A.Z.gte(i,d))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+A.Z.divPow(d,18,4)});if(A.Z.gt(i,c))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const m=await s.methods.allowance(r,t).call();if(A.Z.gt(i,m)){if(a.btnTitle="Approve","MetaMask"==e.state.wallet_type||e.state.isMobile)await M.Z.getUsdtContractW(n).methods.approve(t,i).send({from:r,gasPrice:l});else{const e=M.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"approve",type:"function",inputs:[{type:"address",name:"spender"},{type:"uint256",name:"amount"}]},[t,i]),a=await window.aleereum.send({action:"send_block",from:r,to:M.Z.getUsdtContractAddress(n),data:e,gen_next_work:""});if(!a)throw"Approve error"}await o.sleep(5e3)}if(a.btnTitle="Swap","MetaMask"==e.state.wallet_type||e.state.isMobile)await M.Z.getBridgeContractW(n).methods.callBridge(a.toToken.chainId,i).send({from:r,gasPrice:l});else{const e=M.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"callBridge",type:"function",inputs:[{type:"uint256",name:"chainId"},{type:"uint256",name:"amount"}]},[a.toToken.chainId,i]),t=await window.aleereum.send({action:"send_block",from:r,to:M.Z.getBridgeContractAddress(n),data:e,gen_next_work:""});if(!t)throw"Bridge error"}a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}else if(828==n){const t=M.Z.getBridgeContractAddress(n),o=await M.Z.getWeb(n).eth.getBalance(e.state.wallet_address),s=await M.Z.getBridgeContractR(n).methods.minAmount().call();if(!A.Z.gte(i,s))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+A.Z.divPow(s,18,4)});if(A.Z.gt(i,o))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const r=M.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"callBridge",type:"function",inputs:[]},[]),l=await window.aleereum.send({action:"send_block",from:e.state.wallet_address,to:t,amount:i+"",data:r,gen_next_work:""});if(!l)throw"Bridge error";a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}else{const t=M.Z.getBridgeContractAddress(n+"-1"),s=M.Z.getCCNContract(n),c=await s.methods.balanceOf(r).call(),d=await M.Z.getBridgeCCnContractR(n).methods.minAmount().call();if(!A.Z.gte(i,d))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+A.Z.divPow(d,18,4)});if(A.Z.gt(i,c))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const m=await s.methods.allowance(r,t).call();if(A.Z.gt(i,m)){if(a.btnTitle="Approve","MetaMask"==e.state.wallet_type)await M.Z.getCCNContractW(n).methods.approve(t,i).send({from:r,gasPrice:l});else{const e=M.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"approve",type:"function",inputs:[{type:"address",name:"spender"},{type:"uint256",name:"amount"}]},[t,i]),a=await window.aleereum.send({action:"send_block",from:r,to:M.Z.getCCNContractAddress(n),data:e,gen_next_work:""});if(!a)throw"Approve error"}await o.sleep(5e3)}if(a.btnTitle="Swap","MetaMask"==e.state.wallet_type)await M.Z.getBridgeCCnContractW(n).methods.callBridge(i).send({from:r,gasPrice:l});else{const e=M.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"callBridge",type:"function",inputs:[{type:"uint256",name:"amount"}]},[i]),a=await window.aleereum.send({action:"send_block",from:r,to:M.Z.getBridgeCCnContractAddress(n),data:e,gen_next_work:""});if(!a)throw"Bridge error"}a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}o.refreshFromBalance(),o.refreshToBalance()}catch(n){a.btnTitle="Swap",a.swapLoad=!1,window.notification["error"]({message:"Error",description:JSON.stringify(n)})}}};return{...(0,S.BK)(a),...o}}}),V=t(89);const L=(0,V.Z)(z,[["render",W],["__scopeId","data-v-665cb040"]]);var F=L},782:function(e,a,t){e.exports=t.p+"img/bnb-usdt.10ea85dc.png"},2868:function(e,a,t){e.exports=t.p+"img/ccn.2bcba220.png"},8240:function(e,a,t){e.exports=t.p+"img/ccn1.9ba36bf2.png"},6911:function(e,a,t){e.exports=t.p+"img/oort-usdt.11783e26.png"}}]);