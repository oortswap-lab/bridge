"use strict";(self["webpackChunkOORTSwap"]=self["webpackChunkOORTSwap"]||[]).push([[443],{231:function(e,a,n){n.r(a),n.d(a,{default:function(){return P}});var t=n(3396),o=n(7139),s=n.p+"img/arrow-down-grey.0bc64643.svg";const i=e=>((0,t.dD)("data-v-2e5e448e"),e=e(),(0,t.Cn)(),e),l={class:"bridge_box"},r={class:"exchange_box"},c=i((()=>(0,t._)("div",{class:"exchange_top"},[(0,t._)("p",null,"Bridge")],-1))),d={class:"exchange_bottom"},m={class:"exchange_item_box"},w={class:"exchange_item_top flex_row_space_between"},f=i((()=>(0,t._)("h5",null,"From",-1))),h={class:"flex_row",style:{cursor:"pointer"}},u=["src"],g=i((()=>(0,t._)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",class:"sc-dyGzUR fjZPDO"},[(0,t._)("path",{d:"M0.97168 1L6.20532 6L11.439 1",stroke:"#000000"})],-1))),p={class:"flex_row"},_=["src"],b={style:{"font-size":"14px",color:"rgb(0, 0, 0)","padding-left":"5px"}},T=i((()=>(0,t._)("img",{style:{},src:s,alt:""},null,-1))),k={class:"exchange_item_box"},C={class:"exchange_item_top flex_row_space_between"},x=i((()=>(0,t._)("h5",null,"To",-1))),v={class:"flex_row",style:{cursor:"pointer"}},Z=["src"],B=i((()=>(0,t._)("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",class:"sc-dyGzUR fjZPDO"},[(0,t._)("path",{d:"M0.97168 1L6.20532 6L11.439 1",stroke:"#000000"})],-1))),y={class:"flex_row"},N=["src"],D={style:{"font-size":"14px",color:"rgb(0, 0, 0)","padding-left":"5px"}},U={class:"exchange_item_box"},I=i((()=>(0,t._)("div",{class:"exchange_item_top flex_row_space_between"},[(0,t._)("h5",null,[(0,t._)("span",null,"Receive")])],-1)));function W(e,a,n,s,i,W){const S=(0,t.up)("a-button"),O=(0,t.up)("a-menu-item"),A=(0,t.up)("a-menu"),z=(0,t.up)("a-dropdown"),V=(0,t.up)("a-input"),L=(0,t.up)("a-col"),R=(0,t.up)("a-row");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",r,[c,(0,t._)("div",d,[(0,t.Wm)(R,{align:"middle",justify:"center",gutter:[0,12]},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{span:24,order:e.fromAndTo?3:1},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",w,[f,(0,t._)("p",null,[(0,t.Uk)((0,o.zw)("Balance: "+e.fromToken.balance)+" ",1),(0,t.Wm)(S,{type:"text",style:{color:"rgb(0, 88, 255)",padding:"0"},onClick:e.onFromMax},{default:(0,t.w5)((()=>[(0,t.Uk)("Max")])),_:1},8,["onClick"])])]),(0,t.Wm)(V,{class:"exchange_item_input",size:"large",value:e.fromValue,"onUpdate:value":a[0]||(a[0]=a=>e.fromValue=a),placeholder:"0.0",bordered:!1,"max-length":50,onkeyup:e.fromValue=e.fromValue.match(/\d+(\.\d{0,8})?/)?e.fromValue.match(/\d+(\.\d{0,8})?/)[0]:"",onChange:e.onChange},{suffix:(0,t.w5)((()=>[(0,t.Wm)(z,{trigger:["click"]},{overlay:(0,t.w5)((()=>[(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.fromData,(a=>((0,t.wg)(),(0,t.j4)(O,{onClick:n=>e.onFromCheck(a)},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t._)("img",{style:{width:"20px",height:"20px","border-radius":"50%"},src:a.icon,alt:""},null,8,_),(0,t._)("h4",b,(0,o.zw)(a.name)+" ("+(0,o.zw)(a.chainName)+")",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("img",{src:e.fromToken.icon,alt:""},null,8,u),(0,t._)("h4",null,(0,o.zw)(e.fromToken.name)+" ("+(0,o.zw)(e.fromToken.chainName)+")",1),g])])),_:1})])),_:1},8,["value","onkeyup","onChange"])])])),_:1},8,["order"]),(0,t.Wm)(L,{span:24,order:2,class:"flex_column"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{type:"text",shape:"circle",onClick:e.onSwitch},{default:(0,t.w5)((()=>[T])),_:1},8,["onClick"])])),_:1}),(0,t.Wm)(L,{span:24,order:e.fromAndTo?1:3},{default:(0,t.w5)((()=>[(0,t._)("div",k,[(0,t._)("div",C,[x,(0,t._)("p",null,(0,o.zw)("Balance: "+e.toToken.balance),1)]),(0,t.Wm)(V,{class:"exchange_item_input",size:"large",value:e.toValue,"onUpdate:value":a[1]||(a[1]=a=>e.toValue=a),placeholder:"0.0",bordered:!1,disabled:""},{suffix:(0,t.w5)((()=>[(0,t.Wm)(z,{trigger:["click"]},{overlay:(0,t.w5)((()=>[(0,t.Wm)(A,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.toData,(a=>((0,t.wg)(),(0,t.j4)(O,{onClick:n=>e.onToCheck(a)},{default:(0,t.w5)((()=>[(0,t._)("div",y,[(0,t._)("img",{style:{width:"20px",height:"20px","border-radius":"50%"},src:a.icon,alt:""},null,8,N),(0,t._)("h4",D,(0,o.zw)(a.name)+"("+(0,o.zw)(a.chainName)+")",1)])])),_:2},1032,["onClick"])))),256))])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t._)("img",{src:e.toToken.icon,alt:""},null,8,Z),(0,t._)("h4",null,(0,o.zw)(e.toToken.name)+" ("+(0,o.zw)(e.toToken.chainName)+")",1),B])])),_:1})])),_:1},8,["value"])])])),_:1},8,["order"]),(0,t.Wm)(L,{span:24,order:e.fromAndTo?1:3},{default:(0,t.w5)((()=>[(0,t._)("div",U,[I,(0,t.Wm)(V,{class:"exchange_item_input",size:"large",value:e.toAddress,"onUpdate:value":a[2]||(a[2]=a=>e.toAddress=a),placeholder:"0x",bordered:!1,disabled:e.toAddressDisable,style:{"font-size":"14px !important"}},null,8,["value","disabled"])])])),_:1},8,["order"])])),_:1}),e.address&&e.address.length>0?((0,t.wg)(),(0,t.j4)(S,{key:0,block:"",class:"exchange_btn",onClick:e.onSwap,loading:e.swapLoad,disabled:""==e.fromValue||""==e.toValue,type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(""!=e.fromValue&&""!=e.toValue?e.btnTitle:"Enter an amount"),1)])),_:1},8,["onClick","loading","disabled"])):((0,t.wg)(),(0,t.j4)(S,{key:1,block:"",class:"exchange_btn",onClick:e.login,type:"default"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)("Connect Wallet"))])),_:1},8,["onClick"]))])])])}n(560);var S=n(2693),O=n(4870),A=n(65),z=n(2201),V=(0,t.aZ)({name:"Bridge",setup(){const e=(0,A.oR)(),a=(0,O.qj)({address:(0,t.Fl)((()=>e.state.wallet_address)),swapLoad:!1,fromValue:"",toValue:"",btnTitle:"Swap",toAddress:"",toAddressDisable:!0,fromToken:{icon:n(782),name:"USDT",chainId:"56",chainName:"BNB",balance:"~"},toToken:{icon:n(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"},fromData:[{icon:n(782),name:"USDT",chainId:"56",chainName:"BNB",balance:"~"},{icon:n(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"},{icon:n(8240),name:"CCN",chainId:"970",chainName:"OORT",balance:"~"},{icon:n(2868),name:"CCN",chainId:"828",chainName:"CCN",balance:"~"}],toData:[{icon:n(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"}]});(0,t.YP)((()=>[e.state.wallet_address]),(()=>{a.toAddress=e.state.wallet_address,o.refresh()})),(0,t.bv)((()=>{o.refresh()}));const o={async refreshFromBalance(){if(a.fromToken&&e.state.wallet_address){const n=a.fromToken.chainId,t=a.fromToken.name;if("USDT"==t){const t=z.Z.getUsdtContract(n);let o=await t.methods.balanceOf(e.state.wallet_address).call();a.fromToken.balance=z.Z.getUsdtBalance(n,o)}else if("CCN"==t)if("970"==n){const t=z.Z.getCCNContract(n);let o=await t.methods.balanceOf(e.state.wallet_address).call();a.fromToken.balance=z.Z.getUsdtBalance(n,o)}else{const t=await z.Z.getWeb(n).eth.getBalance(e.state.wallet_address);a.fromToken.balance=z.Z.getUsdtBalance(n,t)}}},async refreshToBalance(){if(a.toToken&&e.state.wallet_address){const n=a.toToken.chainId,t=a.toToken.name;if("USDT"==t){const t=z.Z.getUsdtContract(a.toToken.chainId);let o=await t.methods.balanceOf(e.state.wallet_address).call();a.toToken.balance=z.Z.getUsdtBalance(n,o)}else if("970"==n){const t=z.Z.getCCNContract(n);let o=await t.methods.balanceOf(e.state.wallet_address).call();a.toToken.balance=z.Z.getUsdtBalance(n,o)}else{const t=await z.Z.getWeb(n).eth.getBalance(e.state.wallet_address);a.toToken.balance=z.Z.getUsdtBalance(n,t)}}},async refresh(){e.state.wallet_address&&(o.refreshFromBalance(),o.refreshToBalance())},async onFromMax(){a.fromValue=a.fromToken.balance,o.onChange()},async onFromCheck(t){a.fromToken=t,e.dispatch("switchChainid",a.fromToken.chainId);const s=Array();"56"==a.fromToken.chainId&&"USDT"==a.fromToken.name?(s.push({icon:n(6911),name:"USDT",chainId:"970",chainName:"OORT",balance:"~"}),a.toData=s):"970"==a.fromToken.chainId&&"USDT"==a.fromToken.name?(s.push({icon:n(782),name:"USDT",chainId:"56",chainName:"BNB",balance:"~"}),a.toData=s):"970"==a.fromToken.chainId&&"CCN"==a.fromToken.name?(s.push({icon:n(2868),name:"CCN",chainId:"828",chainName:"CCN",balance:"~"}),a.toData=s):"828"==a.fromToken.chainId&&"CCN"==a.fromToken.name&&(s.push({icon:n(8240),name:"CCN",chainId:"970",chainName:"OORT",balance:"~"}),a.toData=s),a.toToken=a.toData[0],"828"==a.fromToken.chainId?a.toAddressDisable=!0:(a.toAddressDisable=!0,a.toAddress=e.state.wallet_address),o.refreshFromBalance(),o.refreshToBalance(),e.state.chainId==a.fromToken.chainId||e.dispatch("showWalletModal",!0)},async onToCheck(e){a.toToken=e,o.refreshToBalance()},async login(){e.dispatch("showWalletModal",!0)},async onChange(){"USDT"==a.fromToken.name?a.toValue=S.Z.times(a.fromValue,"0.99",4):a.toValue=S.Z.times(a.fromValue,"0.985",4)},async onSwap(){try{if(e.state.chainId!=a.fromToken.chainId)return void e.dispatch("showWalletModal",!0);a.swapLoad=!0;const n=a.fromToken.chainId,t=a.fromToken.name,s=S.Z.timesPow(a.fromValue,18,0),i=e.state.wallet_address,l=z.Z.getGass(n);if("USDT"==t){const e=z.Z.getBridgeContractAddress(n),t=z.Z.getUsdtContract(n),o=await t.methods.balanceOf(i).call(),r=await z.Z.getBridgeContractW(n).methods.minAmount().call();if(!S.Z.gte(s,r))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+S.Z.divPow(r,18,4)});if(S.Z.gt(s,o))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const c=await t.methods.allowance(i,e).call();S.Z.gt(s,c)&&(a.btnTitle="Approve",await z.Z.getUsdtContractW(n).methods.approve(e,s).send({from:i,gasPrice:l})),a.btnTitle="Swap",await z.Z.getBridgeContractW(n).methods.callBridge(a.toToken.chainId,s).send({from:i,gasPrice:l}),a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}else if(828==n){if(3!=window.aleereum.networkId&&0==await window.aleereum.switchNetwork(3))throw"Please switch to huygens";const t=z.Z.getBridgeContractAddress(n),o=await z.Z.getWeb(n).eth.getBalance(e.state.wallet_address),i=await z.Z.getBridgeContractR(n).methods.minAmount().call();if(!S.Z.gte(s,i))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+S.Z.divPow(i,18,4)});if(S.Z.gt(s,o))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const l=z.Z.getWeb(n).eth.abi.encodeFunctionCall({name:"callBridge",type:"function",inputs:[]},[]),r=await window.aleereum.send({action:"send_block",from:e.state.wallet_address,to:t,amount:s,data:l,gen_next_work:""});if(!r)throw"Bridge error";a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}else{const e=z.Z.getBridgeContractAddress(n+"-1"),t=z.Z.getCCNContract(n),o=await t.methods.balanceOf(i).call(),r=await z.Z.getBridgeCCnContractR(n).methods.minAmount().call();if(!S.Z.gte(s,r))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Minimum amount "+S.Z.divPow(r,18,4)});if(S.Z.gt(s,o))return a.swapLoad=!1,void window.notification["error"]({message:"Error",description:"Insufficient balance"});const c=await t.methods.allowance(i,e).call();S.Z.gt(s,c)&&(a.btnTitle="Approve",await z.Z.getCCNContractW(n).methods.approve(e,s).send({from:i,gasPrice:l})),a.btnTitle="Swap",await z.Z.getBridgeCCnContractW(n).methods.callBridge(s).send({from:i,gasPrice:l}),a.swapLoad=!1,window.notification["success"]({message:"Success",description:""})}o.refreshFromBalance(),o.refreshToBalance()}catch(n){a.btnTitle="Swap",a.swapLoad=!1,window.notification["error"]({message:"Error",description:JSON.stringify(n)})}}};return{...(0,O.BK)(a),...o}}}),L=n(89);const R=(0,L.Z)(V,[["render",W],["__scopeId","data-v-2e5e448e"]]);var P=R},782:function(e,a,n){e.exports=n.p+"img/bnb-usdt.10ea85dc.png"},2868:function(e,a,n){e.exports=n.p+"img/ccn.2bcba220.png"},8240:function(e,a,n){e.exports=n.p+"img/ccn1.9ba36bf2.png"},6911:function(e,a,n){e.exports=n.p+"img/oort-usdt.11783e26.png"}}]);